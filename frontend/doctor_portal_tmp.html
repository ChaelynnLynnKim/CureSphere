<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Portal</title>
	

	<style>
		body {
			font-family: Arial, Helvetica, sans-serif;
			font-size: 16px;
			line-height: 1.6;
			background-color: #f8f8f8;
			margin: 0;
			padding: 0;
		}
		
		.container {
			max-width: 1200px;
			margin: 0 auto;
			padding: 20px;
		}
		
		h1, h2, h3, h4, h5, h6 {
			margin-top: 0;
		}
		
		.section {
			margin-bottom: 40px;
		}
		
		.section-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 20px;
		}
		
		.section-header h2 {
			margin-right: 10px;
		}
		
		.table {
			width: 100%;
			border-collapse: collapse;
			border: 1px solid #ddd;
			margin-bottom: 20px;
		}
		
		.table th, .table td {
			padding: 10px;
			text-align: left;
			border: 1px solid #ddd;
		}
		
		.table th {
			background-color: #f2f2f2;
		}
		
		.btn {
			background-color: #4CAF50;
			color: white;
			border: none;
			padding: 10px 20px;
			border-radius: 5px;
			cursor: pointer;
		}
		
		.btn:hover {
			background-color: #3e8e41;
		}
	</style>
</head>

<body>
	<div class="container">
		<section class="section">
			<div class="section-header">
				<h2>Personal Information</h2>
			</div>


            <form action="" method="get" target="" id="search_doctors">
                <div class = "row">
                <input name="search_q" id = "search_q" type="text" placeholder="Search with doctor email"> 
                </div>

            <div class = "row">
                <button type="button" name="search" id="search"  onclick="search()"> Search </button>
            </div>

            <div class = "row">
                <button type="button" name="searchAp" id="searchAp"  onclick="getCurrAppointment()"> getCurr </button>
            </div>


			<table class="table">
				<tr>
					<th>Name</th>
					<td id="name">John Doe</td>
				</tr>
                <tr>
					<th>Role</th>
					<td id="role">Doctor</td>
				</tr>
				<tr> 
					<th>Email (user_id)</th>
					<td id="email">john.doe@example.com</td>
				</tr>
                <tr>
					<th>Department / Specialties</th>
					<td id="phone">d/s</td>
				</tr>
				<tr>
					<th>City</th>
					<td id="phone">New York</td>
				</tr>
				<tr>
					<th>Clinic Zip Code</th>
					<td id="address">12345</td>
				</tr>
			</table>
		</section>

		<section class="section">
			<div class="section-header">
				<h2>Current Appointments</h2>
				<a href="doctor_submit.html"> <button class="btn" id="submit">Submit Medicine/Feedback</button> </a>
			</div>
			<table class="table">
				<tr>
					<th>Patient email</th>
					<td id="doctor_email">Jane_Smith@columbia.edu</td>
				</tr>
				<tr>
					<th>Date</th>
					<td id="date">May 15, 2023</td>
				</tr>
				<tr>
					<th>Time</th>
					<td id="time">2:00 PM</td>
				</tr>
            </table>
            <table class="table">
				<tr>
					<th>Patient email</th>
					<td id="doctor_email">Jane_Smith@columbia.edu</td>
				</tr>
				<tr>
					<th>Date</th>
					<td id="date">May 15, 2023</td>
				</tr>
				<tr>
					<th>Time</th>
					<td id="time">2:00 PM</td>
				</tr>
            </table>
		</section>

        <section class="section">
			<div class="section-header">
				<h2>Past Appointments</h2>
				
			</div>
            <a href="doctor_pastAppointment.html"> <button class="btn" id="more-info">More Info</button> </a>

		</section>
    </div>
        
    <script type="text/javascript" src="lib/axios/dist/axios.standalone.js"></script>
    <script type="text/javascript" src="lib/CryptoJS/rollups/hmac-sha256.js"></script>
    <script type="text/javascript" src="lib/CryptoJS/rollups/sha256.js"></script>
    <script type="text/javascript" src="lib/CryptoJS/components/hmac.js"></script>
    <script type="text/javascript" src="lib/CryptoJS/components/enc-base64.js"></script>
    <script type="text/javascript" src="lib/url-template/url-template.js"></script>
    <script type="text/javascript" src="lib/apiGatewayCore/sigV4Client.js"></script>
    <script type="text/javascript" src="lib/apiGatewayCore/apiGatewayClient.js"></script>
    <script type="text/javascript" src="lib/apiGatewayCore/simpleHttpClient.js"></script>
    <script type="text/javascript" src="lib/apiGatewayCore/utils.js"></script>
    <script type="text/javascript" src="apigClient.js"></script>

<script type = "text/javascript">
    var apigClient = apigClientFactory.newClient();

    function getCurrAppointment() {
        //TODO : get user_id, user_role from local storage, change the codes below
        var user_id = "wl2872@columbia.edu"
        var user_role = "doctor"
        var appointment_type = "curr"

        var params = {
			headers:{
				'email' : user_id,
            'role' : user_role,
            'appointment_type' : appointment_type
			}
            
        };
      
        var additionalParams = {
          headers: {
            'Content-Type': 'application/json',
			      'Access-Control-Allow-Headers': '*',
      		  'Access-Control-Allow-Origin': '*',
      		  'Access-Control-Allow-Methods': '*',
          }
        };
        
        apigClient.getAppointmentOptions(params, {}, additionalParams)
            .then(function(result) {
                console.log("Search Result : ", result);
      
            }).catch(function(result) {
                console.log(result);
            });
    }

    function search() {
        var search_q = document.getElementById('search_q');
        search_q = search_q.value;
        console.log('search doctor input click');
        searchDoctors(search_q);
      }

		function searchDoctors(search_q) {
			console.log(search_q);
		  
			var params = {
				'id' : search_q
			};
		  
			var additionalParams = {
			  headers: {
				
			  }
			};
			
			apigClient.doctorsIdGet(params, {}, additionalParams)
				.then(function(result) {
					console.log("Search Result : ", result);
				}).catch(function(result) {
					console.log(result);
				});
		  }
		
</script>

	
</body>
</html>

